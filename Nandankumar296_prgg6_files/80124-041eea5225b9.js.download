"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[80124],{37732:(e,t,r)=>{r.d(t,{a:()=>s});let n=new Set(["children","localName","ref","style","className"]),i=new WeakMap,o=(e,t,r,n,o)=>{let s,l,a=null==o?void 0:o[t];void 0===a||r===n?null==r&&t in HTMLElement.prototype?e.removeAttribute(t):e[t]=r:(void 0===(s=i.get(e))&&i.set(e,s=new Map),l=s.get(a),void 0!==r?void 0===l?(s.set(a,l={handleEvent:r}),e.addEventListener(a,l)):l.handleEvent=r:void 0!==l&&(s.delete(a),e.removeEventListener(a,l)))};function s(e=window.React,t,r,i,l){let a,f,c;void 0===t?({tagName:f,elementClass:c,events:i,displayName:l}=e,a=e.react):(a=e,c=r,f=t);let h=a.Component,d=a.createElement,u=new Set(Object.keys(null!=i?i:{}));let v=class v extends h{constructor(){super(...arguments),this.o=null}t(e){if(null!==this.o)for(let t in this.i)o(this.o,t,this.props[t],e?e[t]:void 0,i)}componentDidMount(){var e;this.t(),null==(e=this.o)||e.removeAttribute("defer-hydration")}componentDidUpdate(e){this.t(e)}render(){let{_$Gl:e,...t}=this.props;this.h!==e&&(this.u=t=>{null!==e&&("function"==typeof e?e(t):e.current=t),this.o=t,this.h=e}),this.i={};let r={ref:this.u};for(let[e,i]of Object.entries(t))n.has(e)?r["className"===e?"class":e]=i:u.has(e)||e in c.prototype?this.i[e]=i:r[e]=i;return r.suppressHydrationWarning=!0,d(f,r)}};v.displayName=null!=l?l:c.name;let m=a.forwardRef((e,t)=>d(v,{...e,_$Gl:t},null==e?void 0:e.children));return m.displayName=v.displayName,m}},83510:(e,t,r)=>{let n;r.d(t,{SV:()=>MergeView,ex:()=>eh});var i=r(24774),o=r(53839),s=r(97417),l=r(15874),a=r(43720);let Change=class Change{constructor(e,t,r,n){this.fromA=e,this.toA=t,this.fromB=r,this.toB=n}offset(e,t=e){return new Change(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}};function f(e,t,r,n,i,o){if(e==n)return[];let s=p(e,t,r,n,i,o),l=A(e,t+s,r,n,i+s,o);t+=s,r-=l,i+=s;let a=r-t,d=(o-=l)-i;if(!a||!d)return[new Change(t,r,i,o)];if(a>d){let s=e.slice(t,r).indexOf(n.slice(i,o));if(s>-1)return[new Change(t,t+s,i,i),new Change(t+s+d,r,o,o)]}else if(d>a){let s=n.slice(i,o).indexOf(e.slice(t,r));if(s>-1)return[new Change(t,t,i,i+s),new Change(r,r,i+s+a,o)]}if(1==a||1==d)return[new Change(t,r,i,o)];let g=function e(t,r,n,i,o,s){let l=n-r,a=s-o;if(l<a){let l=e(i,o,s,t,r,n);return l&&[l[1],l[0],l[2]]}return l<4||2*a<l?null:b(t,r,n,i,o,s,Math.floor(l/4),-1)}(e,t,r,n,i,o);if(g){let[s,l,a]=g;return f(e,t,s,n,i,l).concat(f(e,s+a,r,n,l+a,o))}return function(e,t,r,n,i,o){let s=r-t,l=o-i;if(c<1e9&&Math.min(s,l)>16*c||h>0&&Date.now()>h)return Math.min(s,l)>64*c?[new Change(t,r,i,o)]:C(e,t,r,n,i,o);let a=Math.ceil((s+l)/2);u.reset(a),m.reset(a);let d=(r,o)=>e.charCodeAt(t+r)==n.charCodeAt(i+o),g=(t,i)=>e.charCodeAt(r-t-1)==n.charCodeAt(o-i-1),p=(s-l)%2!=0?m:null,A=p?null:u;for(let b=0;b<a;b++){if(b>c||h>0&&!(63&b)&&Date.now()>h)return C(e,t,r,n,i,o);let B=u.advance(b,s,l,a,p,!1,d)||m.advance(b,s,l,a,A,!0,g);if(B)return function(e,t,r,n,i,o,s,l){let a=!1;return(y(e,n)||++n!=r||(a=!0),y(i,l)||++l!=s||(a=!0),a)?[new Change(t,r,o,s)]:f(e,t,n,i,o,l).concat(f(e,n,r,i,l,s))}(e,t,r,t+B[0],n,i,o,i+B[1])}return[new Change(t,r,i,o)]}(e,t,r,n,i,o)}let c=1e9,h=0,d=!1;let Frontier=class Frontier{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let e=0;e<this.len;e++)this.vec[e]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,r,n,i,o,s){for(let l=-e+this.start;l<=e-this.end;l+=2){let a=n+l,f=l==-e||l!=e&&this.vec[a-1]<this.vec[a+1]?this.vec[a+1]:this.vec[a-1]+1,c=f-l;for(;f<t&&c<r&&s(f,c);)f++,c++;if(this.vec[a]=f,f>t)this.end+=2;else if(c>r)this.start+=2;else if(i){let e=n+(t-r)-l;if(e>=0&&e<this.len&&-1!=i.vec[e]){if(o){let r=i.vec[e];if(r>=t-f)return[r,n+r-e]}else if(f>=t-i.vec[e])return[f,c]}}}return null}};let u=new Frontier,m=new Frontier;function g(e,t){let r=1,n=Math.min(e,t);for(;r<n;)r<<=1;return r}function p(e,t,r,n,i,o){if(t==r||t==o||e.charCodeAt(t)!=n.charCodeAt(i))return 0;let s=g(r-t,o-i);for(let l=t,a=i;;){let i=l+s,f=a+s;if(i>r||f>o||e.slice(l,i)!=n.slice(a,f)){if(1==s)return l-t-!y(e,l);s>>=1}else{if(i==r||f==o)return i-t;l=i,a=f}}}function A(e,t,r,n,i,o){if(t==r||i==o||e.charCodeAt(r-1)!=n.charCodeAt(o-1))return 0;let s=g(r-t,o-i);for(let l=r,a=o;;){let o=l-s,f=a-s;if(o<t||f<i||e.slice(o,l)!=n.slice(f,a)){if(1==s)return r-l-!y(e,l);s>>=1}else{if(o==t||f==i)return r-o;l=o,a=f}}}function b(e,t,r,n,i,o,s,l){let a=n.slice(i,o),f=null;for(;;){if(f||s<l)return f;for(let l=t+s;;){!y(e,l)&&l++;let c=l+s;if(y(e,c)||(c+=c==l+1?1:-1),c>=r)break;let h=e.slice(l,c),d=-1;for(;-1!=(d=a.indexOf(h,d+1));){let s=p(e,c,r,n,i+d+h.length,o),a=A(e,t,l,n,i,i+d),u=h.length+s+a;(!f||f[2]<u)&&(f=[l-a,i+d-a,u])}l=c}if(l<0)return f;s>>=1}}function C(e,t,r,n,i,o){let s;d=!0;let l=r-t,a=o-i;if(l<a){let a=b(n,i,o,e,t,r,Math.floor(l/6),50);s=a&&[a[1],a[0],a[2]]}else s=b(e,t,r,n,i,o,Math.floor(a/6),50);if(!s)return[new Change(t,r,i,o)];let[c,h,u]=s;return f(e,t,c,n,i,h).concat(f(e,c+u,r,n,h+u,o))}function B(e,t){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];n.toA>i.fromA-t&&n.toB>i.fromB-t&&(e[r-1]=new Change(n.fromA,i.toA,n.fromB,i.toB),e.splice(r--,1))}}try{n=RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(e){}function w(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function k(e,t){if(t==e.length)return 0;let r=e.charCodeAt(t);return r<192?+!!w(r):n?O(r)&&t!=e.length-1?2*!!n.test(e.slice(t,t+2)):+!!n.test(String.fromCharCode(r)):0}function x(e,t){if(!t)return 0;let r=e.charCodeAt(t-1);return r<192?+!!w(r):n?E(r)&&1!=t?2*!!n.test(e.slice(t-2,t)):+!!n.test(String.fromCharCode(r)):0}function M(e,t,r){if(t==e.length||!x(e,t))return t;for(let n=t,i=t+r,o=0;o<8;o++){let t=k(e,n);if(!t||n+t>i)return n;n+=t}return t}function D(e,t,r){if(!t||!k(e,t))return t;for(let n=t,i=t-r,o=0;o<8;o++){let t=x(e,n);if(!t||n-t<i)return n;n-=t}return t}function L(e,t,r){for(;t!=r;t--)if(10==e.charCodeAt(t-1))return t;return -1}function N(e,t,r){for(;t!=r;t++)if(10==e.charCodeAt(t))return t;return -1}let O=e=>e>=55296&&e<=56319,E=e=>e>=56320&&e<=57343;function y(e,t){return!t||t==e.length||!O(e.charCodeAt(t-1))||!E(e.charCodeAt(t))}function S(e,t,r){var n;return function(e,t,r){for(let n=0,i=0;i<e.length;i++){let o=e[i],s=o.toA-o.fromA,l=o.toB-o.fromB;if(s&&l||s>3||l>3){let a=i==e.length-1?t.length:e[i+1].fromA,f=o.fromA-n,c=a-o.toA,h=D(t,o.fromA,f),d=M(t,o.toA,c),u=o.fromA-h,m=d-o.toA;if((!s||!l)&&u&&m){let f=Math.max(s,l),[c,g,p]=s?[t,o.fromA,o.toA]:[r,o.fromB,o.toB];f>u&&t.slice(h,o.fromA)==c.slice(p-u,p)?(h=(o=e[i]=new Change(h,h+s,o.fromB-u,o.toB-u)).fromA,d=M(t,o.toA,a-o.toA)):f>m&&t.slice(o.toA,d)==c.slice(g,g+m)&&(d=(o=e[i]=new Change(d-s,d,o.fromB+m,o.toB+m)).toA,h=D(t,o.fromA,o.fromA-n)),u=o.fromA-h,m=d-o.toA}if(u||m)o=e[i]=new Change(o.fromA-u,o.toA+m,o.fromB-u,o.toB+m);else if(s){if(!l){let r=N(t,o.fromA,o.toA),n,s=r<0?-1:L(t,o.toA,o.fromA);r>-1&&(n=r-o.fromA)<=c&&t.slice(o.fromA,r)==t.slice(o.toA,o.toA+n)?o=e[i]=o.offset(n):s>-1&&(n=o.toA-s)<=f&&t.slice(o.fromA-n,o.fromA)==t.slice(s,o.toA)&&(o=e[i]=o.offset(-n))}}else{let t=N(r,o.fromB,o.toB),n,s=t<0?-1:L(r,o.toB,o.fromB);t>-1&&(n=t-o.fromB)<=c&&r.slice(o.fromB,t)==r.slice(o.toB,o.toB+n)?o=e[i]=o.offset(n):s>-1&&(n=o.toB-s)<=f&&r.slice(o.fromB-n,o.fromB)==r.slice(s,o.toB)&&(o=e[i]=o.offset(-n))}}n=o.toA}return B(e,3),e}((c=(null!=(n=null==r?void 0:r.scanLimit)?n:1e9)>>1,h=(null==r?void 0:r.timeout)?Date.now()+r.timeout:0,d=!1,function(e,t,r){for(;;){B(r,1);let n=!1;for(let i=0;i<r.length;i++){let o=r[i],s,l;(s=p(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new Change(o.fromA+s,o.toA,o.fromB+s,o.toB)),(l=A(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=r[i]=new Change(o.fromA,o.toA-l,o.fromB,o.toB-l));let a=o.toA-o.fromA,f=o.toB-o.fromB;if(a&&f)continue;let c=o.fromA-(i?r[i-1].toA:0),h=(i<r.length-1?r[i+1].fromA:e.length)-o.toA;if(!c||!h)continue;let d=a?e.slice(o.fromA,o.toA):t.slice(o.fromB,o.toB);c<=d.length&&e.slice(o.fromA-c,o.fromA)==d.slice(d.length-c)?(r[i]=new Change(o.fromA-c,o.toA-c,o.fromB-c,o.toB-c),n=!0):h<=d.length&&e.slice(o.toA,o.toA+h)==d.slice(0,h)&&(r[i]=new Change(o.fromA+h,o.toA+h,o.fromB+h,o.toB+h),n=!0)}if(!n)break}return r}(e,t,f(e,0,e.length,t,0,t.length))),e,t)}let T=o.sj.define({combine:e=>e[0]}),R=o.Pe.define(),G=o.sj.define(),V=o.sU.define({create:e=>null,update(e,t){for(let r of t.effects)r.is(R)&&(e=r.value);for(let r of t.state.facet(G))e=r(e,t);return e}});let Chunk=class Chunk{constructor(e,t,r,n,i,o=!0){this.changes=e,this.fromA=t,this.toA=r,this.fromB=n,this.toB=i,this.precise=o}offset(e,t){return e||t?new Chunk(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t,r){return z(S(e.toString(),t.toString(),r),e,t,0,0,!d)}static updateA(e,t,r,n,i){return W(H(e,n,!0,r.length),e,t,r,i)}static updateB(e,t,r,n,i){return W(H(e,n,!1,t.length),e,t,r,i)}};function U(e,t,r,n){let i=r.lineAt(e),o=n.lineAt(t);return i.to==e&&o.to==t&&e<r.length&&t<n.length?[e+1,t+1]:[i.from,o.from]}function Z(e,t,r,n){let i=r.lineAt(e),o=n.lineAt(t);return i.from==e&&o.from==t?[e,t]:[i.to+1,o.to+1]}function z(e,t,r,n,i,o){let s=[];for(let l=0;l<e.length;l++){let a=e[l],[f,c]=U(a.fromA+n,a.fromB+i,t,r),[h,d]=Z(a.toA+n,a.toB+i,t,r),u=[a.offset(-f+n,-c+i)];for(;l<e.length-1;){let o=e[l+1],[s,a]=U(o.fromA+n,o.fromB+i,t,r);if(s>h+1&&a>d+1)break;u.push(o.offset(-f+n,-c+i)),[h,d]=Z(o.toA+n,o.toB+i,t,r),l++}s.push(new Chunk(u,f,Math.max(f,h),c,Math.max(c,d),o))}return s}function _(e,t,r,n){let i=0,o=e.length;for(;;){if(i==o){let n=0,o=0;i&&({toA:n,toB:o}=e[i-1]);let s=t-(r?n:o);return[n+s,o+s]}let s=i+o>>1,l=e[s],[a,f]=r?[l.fromA,l.toA]:[l.fromB,l.toB];if(a>t)o=s;else{if(!(f<=t))return n?[l.fromA,l.fromB]:[l.toA,l.toB];i=s+1}}}function H(e,t,r,n){let i=[];return t.iterChangedRanges((o,s,l,a)=>{let f=0,c=r?t.length:n,h=0,d=r?n:t.length;o>1e3&&([f,h]=_(e,o-1e3,r,!0)),s<t.length-1e3&&([c,d]=_(e,s+1e3,r,!1));let u=a-l-(s-o),m,[g,p]=r?[u,0]:[0,u];i.length&&(m=i[i.length-1]).toA>=f?i[i.length-1]={fromA:m.fromA,fromB:m.fromB,toA:c,toB:d,diffA:m.diffA+g,diffB:m.diffB+p}:i.push({fromA:f,toA:c,fromB:h,toB:d,diffA:g,diffB:p})}),i}function W(e,t,r,n,i){if(!e.length)return t;let o=[];for(let s=0,l=0,a=0,f=0;;s++){let c=s==e.length?null:e[s],h=c?c.fromA+l:r.length,u=c?c.fromB+a:n.length;for(;f<t.length;){let e=t[f];if(e.toA+l>h||e.toB+a>u)break;o.push(e.offset(l,a)),f++}if(!c)break;let m=c.toA+l+c.diffA,g=c.toB+a+c.diffB;for(let e of z(S(r.sliceString(h,m),n.sliceString(u,g),i),r,n,h,u,!d))o.push(e);for(l+=c.diffA,a+=c.diffB;f<t.length;){let e=t[f];if(e.fromA+l>m&&e.fromB+a>g)break;f++}}return o}let j={scanLimit:500},I=i.Z9.fromClass(class{constructor(e){({deco:this.deco,gutter:this.gutter}=K(e))}update(e){var t,r,n,i;(e.docChanged||e.viewportChanged||(t=e.startState,r=e.state,t.field(V,!1)!=r.field(V,!1))||(n=e.startState,i=e.state,n.facet(T)!=i.facet(T)))&&({deco:this.deco,gutter:this.gutter}=K(e.view))}},{decorations:e=>e.deco}),P=o.Nb.low((0,i.cU)({class:"cm-changeGutter",markers:e=>{var t;return(null==(t=e.plugin(I))?void 0:t.gutter)||o.om.empty}})),q=i.NZ.line({class:"cm-changedLine"}),F=i.NZ.mark({class:"cm-changedText"}),Y=i.NZ.mark({tagName:"ins",class:"cm-insertedLine"}),$=i.NZ.mark({tagName:"del",class:"cm-deletedLine"}),J=new class extends i.wJ{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function K(e){let t=e.state.field(V),{side:r,highlightChanges:n,markGutter:i,overrideChunk:s}=e.state.facet(T),l="a"==r,a=new o.vB,f=i?new o.vB:null,{from:c,to:h}=e.viewport;for(let r of t){if((l?r.fromA:r.fromB)>=h)break;!((l?r.toA:r.toB)>c)||s&&s(e.state,r,a,f)||function(e,t,r,n,i,o){let s=r?e.fromA:e.fromB,l=r?e.toA:e.toB,a=0;if(s!=l){i.add(s,s,q),i.add(s,l,r?$:Y),o&&o.add(s,s,J);for(let f=t.iterRange(s,l-1),c=s;!f.next().done;){if(f.lineBreak){c++,i.add(c,c,q),o&&o.add(c,c,J);continue}let t=c+f.value.length;if(n)for(;a<e.changes.length;){let n=e.changes[a],o=s+(r?n.fromA:n.fromB),l=s+(r?n.toA:n.toB),f=Math.max(c,o),h=Math.min(t,l);if(f<h&&i.add(f,h,F),l<t)a++;else break}c=t}}}(r,e.state.doc,l,n,a,f)}return{deco:a.finish(),gutter:f&&f.finish()}}let Spacer=class Spacer extends i.xO{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};let Q=o.Pe.define({map:(e,t)=>e.map(t)}),X=o.sU.define({create:()=>i.NZ.none,update:(e,t)=>{for(let e of t.effects)if(e.is(Q))return e.value;return e.map(t.changes)},provide:e=>i.Lz.decorations.from(e)});function ee(e,t){if(e.size!=t.size)return!1;let r=e.iter(),n=t.iter();for(;r.value;){if(r.from!=n.from||Math.abs(r.value.spec.widget.height-n.value.spec.widget.height)>1)return!1;r.next(),n.next()}return!0}let et=o.Pe.define({map:(e,t)=>t.mapPos(e)});let CollapseWidget=class CollapseWidget extends i.xO{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent=e.state.phrase("$ unchanged lines",this.lines),t.addEventListener("click",t=>{let r=e.posAtDOM(t.target);e.dispatch({effects:et.of(r)});let{side:n,sibling:i}=e.state.facet(T);i&&i().dispatch({effects:et.of(function(e,t,r){let n=0,i=0;for(let o=0;;o++){let s=o<t.length?t[o]:null;if(!s||(r?s.fromA:s.fromB)>=e)return i+(e-n);[n,i]=r?[s.toA,s.toB]:[s.toB,s.toA]}}(r,e.state.field(V),"a"==n))})}),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}};let er=o.sU.define({create:e=>i.NZ.none,update(e,t){for(let r of(e=e.map(t.changes),t.effects))r.is(et)&&(e=e.update({filter:e=>e!=r.value}));return e},provide:e=>i.Lz.decorations.from(e)});function en({margin:e=3,minSize:t=4}){return er.init(r=>(function(e,t,r){let n=new o.vB,s="a"==e.facet(T).side,l=e.field(V),a=1;for(let o=0;;o++){let f=o<l.length?l[o]:null,c=o?a+t:1,h=f?e.doc.lineAt(s?f.fromA:f.fromB).number-1-t:e.doc.lines,d=h-c+1;if(d>=r&&n.add(e.doc.line(c).from,e.doc.line(h).to,i.NZ.replace({widget:new CollapseWidget(d),block:!0})),!f)break;a=e.doc.lineAt(Math.min(e.doc.length,s?f.toA:f.toB)).number}return n.finish()})(r,e,t))}let ei=i.Lz.styleModule.of(new s.G({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),eo=i.Lz.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'"\u299A"',marginInlineEnd:"7px"},"&:after":{content:'"\u299A"',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),es=new o.xx,el=new o.xx;let MergeView=class MergeView{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||j;let t=[o.Nb.low(I),eo,ei,X,i.Lz.updateListener.of(e=>{this.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some(e=>e.effects.some(e=>e.is(Q)))&&this.measure()})],r=[T.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&r.push(P);let n=o.$t.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],i.Lz.editorAttributes.of({class:"cm-merge-a"}),el.of(r),t]}),s=[T.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&s.push(P);let l=o.$t.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],i.Lz.editorAttributes.of({class:"cm-merge-b"}),el.of(s),t]});this.chunks=Chunk.build(n.doc,l.doc,this.diffConf);let a=[V.init(()=>this.chunks),es.of(e.collapseUnchanged?en(e.collapseUnchanged):[])];n=n.update({effects:o.Pe.appendConfig.of(a)}).state,l=l.update({effects:o.Pe.appendConfig.of(a)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let f=e.orientation||"a-b",c=document.createElement("div");c.className="cm-mergeViewEditor";let h=document.createElement("div");h.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==f?c:h),this.editorDOM.appendChild("a-b"==f?h:c),this.a=new i.Lz({state:n,parent:c,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.a)}),this.b=new i.Lz({state:l,parent:h,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.b)}),this.setupRevertControls(!!e.revertControls,"b-to-a"==e.revertControls,e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.some(e=>e.docChanged)){let r=e[e.length-1],n=e.reduce((e,t)=>e.compose(t.changes),o.VR.empty(e[0].startState.doc.length));this.chunks=t==this.a?Chunk.updateA(this.chunks,r.newDoc,this.b.state.doc,n,this.diffConf):Chunk.updateB(this.chunks,this.a.state.doc,r.newDoc,n,this.diffConf),t.update([...e,r.state.update({effects:R.of(this.chunks)})]);let i=t==this.a?this.b:this.a;i.update([i.state.update({effects:R.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let t="b-a"!=e.orientation;if(t!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let e=this.a.dom.parentNode,r=this.b.dom.parentNode;e.remove(),r.remove(),this.editorDOM.insertBefore(t?e:r,this.editorDOM.firstChild),this.editorDOM.appendChild(t?r:e),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let t=!!this.revertDOM,r=this.revertToA,n=this.renderRevert;"revertControls"in e&&(t=!!e.revertControls,r="b-to-a"==e.revertControls),"renderRevertControl"in e&&(n=e.renderRevertControl),this.setupRevertControls(t,r,n)}let t="highlightChanges"in e,r="gutter"in e,n="collapseUnchanged"in e;if(t||r||n){let i=[],o=[];if(t||r){let n=this.a.state.facet(T),s=r?!1!==e.gutter:n.markGutter,l=t?!1!==e.highlightChanges:n.highlightChanges;i.push(el.reconfigure([T.of({side:"a",sibling:()=>this.b,highlightChanges:l,markGutter:s}),s?P:[]])),o.push(el.reconfigure([T.of({side:"b",sibling:()=>this.a,highlightChanges:l,markGutter:s}),s?P:[]]))}if(n){let t=es.reconfigure(e.collapseUnchanged?en(e.collapseUnchanged):[]);i.push(t),o.push(t)}this.a.dispatch({effects:i}),this.b.dispatch({effects:o})}this.scheduleMeasure()}setupRevertControls(e,t,r){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",e=>this.revertClicked(e)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){!function(e,t,r){let n=new o.vB,s=new o.vB,l=e.state.field(X).iter(),a=t.state.field(X).iter(),f=0,c=0,h=0,d=0,u=e.viewport,m=t.viewport;for(let o=0;;o++){let g=o<r.length?r[o]:null,p=g?g.fromA:e.state.doc.length,A=g?g.fromB:t.state.doc.length;if(f<p){let r=e.lineBlockAt(f).top+h-(t.lineBlockAt(c).top+d);r<-.01?(h-=r,n.add(f,f,i.NZ.widget({widget:new Spacer(-r),block:!0,side:-1}))):r>.01&&(d+=r,s.add(c,c,i.NZ.widget({widget:new Spacer(r),block:!0,side:-1})))}if(p>f+1e3&&f<u.from&&p>u.from&&c<m.from&&A>m.from){let e=Math.min(u.from-f,m.from-c);f+=e,c+=e,o--}else if(g)f=g.toA,c=g.toB;else break;for(;l.value&&l.from<f;)h-=l.value.spec.widget.height,l.next();for(;a.value&&a.from<c;)d-=a.value.spec.widget.height,a.next()}for(;l.value;)h-=l.value.spec.widget.height,l.next();for(;a.value;)d-=a.value.spec.widget.height,a.next();let g=e.contentHeight+h-(t.contentHeight+d);g<.01?n.add(e.state.doc.length,e.state.doc.length,i.NZ.widget({widget:new Spacer(-g),block:!0,side:1})):g>.01&&s.add(t.state.doc.length,t.state.doc.length,i.NZ.widget({widget:new Spacer(g),block:!0,side:1}));let p=n.finish(),A=s.finish();ee(p,e.state.field(X))||e.dispatch({effects:Q.of(p)}),ee(A,t.state.field(X))||t.dispatch({effects:Q.of(A)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,r=this.a.viewport,n=this.b.viewport;for(let i=0;i<this.chunks.length;i++){let o=this.chunks[i];if(o.fromA>r.to||o.fromB>n.to)break;if(o.fromA<r.from||o.fromB<n.from)continue;let s=this.a.lineBlockAt(o.fromA).top+"px";for(;t&&+t.dataset.chunk<i;)t=ea(t);t&&t.dataset.chunk==String(i)?(t.style.top!=s&&(t.style.top=s),t=t.nextSibling):e.insertBefore(this.renderRevertButton(s,i),t)}for(;t;)t=ea(t)}renderRevertButton(e,t){let r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");let e=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",e),r.setAttribute("title",e),r.textContent=this.revertToLeft?"\u21DC":"\u21DD"}return r.style.top=e,r.setAttribute("data-chunk",String(t)),r}revertClicked(e){let t=e.target,r;for(;t&&t.parentNode!=this.revertDOM;)t=t.parentNode;if(t&&(r=this.chunks[t.dataset.chunk])){let[t,n,i,o,s,l]=this.revertToA?[this.b,this.a,r.fromB,r.toB,r.fromA,r.toA]:[this.a,this.b,r.fromA,r.toA,r.fromB,r.toB],a=t.state.sliceDoc(i,Math.max(i,o-1));i!=o&&l<=n.state.doc.length&&(a+=t.state.lineBreak),n.dispatch({changes:{from:s,to:Math.min(n.state.doc.length,l),insert:a},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}};function ea(e){let t=e.nextSibling;return e.remove(),t}let ef=new class extends i.wJ{constructor(){super(...arguments),this.elementClass="cm-deletedLineGutter"}},ec=o.Nb.low((0,i.cU)({class:"cm-changeGutter",markers:e=>{var t;return(null==(t=e.plugin(I))?void 0:t.gutter)||o.om.empty},widgetMarker:(e,t)=>t instanceof DeletionWidget?ef:null}));function eh(e){let t="string"==typeof e.original?o.EY.of(e.original.split(/\r?\n/)):e.original,r=e.diffConfig||j;return[o.Nb.low(I),ep,eo,i.Lz.editorAttributes.of({class:"cm-merge-b"}),G.of((e,t)=>{let n=t.effects.find(e=>e.is(ed));return n&&(e=Chunk.updateA(e,n.value.doc,t.startState.doc,n.value.changes,r)),t.docChanged&&(e=Chunk.updateB(e,t.state.field(eu),t.newDoc,t.changes,r)),e}),T.of({highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter,syntaxHighlightDeletions:!1!==e.syntaxHighlightDeletions,syntaxHighlightDeletionsMaxLength:3e3,mergeControls:!1!==e.mergeControls,overrideChunk:e.allowInlineDiffs?eB:void 0,side:"b"}),eu.init(()=>t),!1!==e.gutter?ec:[],e.collapseUnchanged?en(e.collapseUnchanged):[],V.init(e=>Chunk.build(t,e.doc,r))]}let ed=o.Pe.define(),eu=o.sU.define({create:()=>o.EY.empty,update(e,t){for(let r of t.effects)r.is(ed)&&(e=r.value.doc);return e}}),em=new WeakMap;let DeletionWidget=class DeletionWidget extends i.xO{constructor(e){super(),this.buildDOM=e,this.dom=null}eq(e){return this.dom==e.dom}toDOM(e){return this.dom||(this.dom=this.buildDOM(e))}};function eg(e){let t=new o.vB;for(let r of e.field(V)){let n=e.facet(T).overrideChunk&&ev(e,r);t.add(r.fromB,r.fromB,function(e,t,r){let n=em.get(t.changes);if(n)return n;let s=i.NZ.widget({block:!0,side:-1,widget:new DeletionWidget(n=>{let{highlightChanges:i,syntaxHighlightDeletions:s,syntaxHighlightDeletionsMaxLength:f,mergeControls:c}=e.facet(T),h=document.createElement("div");if(h.className="cm-deletedChunk",c){let t=h.appendChild(document.createElement("div"));t.className="cm-chunkButtons";let r=t.appendChild(document.createElement("button"));r.name="accept",r.textContent=e.phrase("Accept"),r.onmousedown=e=>{e.preventDefault(),function(e,t){let{state:r}=e,n=null!=t?t:r.selection.main.head,i=e.state.field(V).find(e=>e.fromB<=n&&e.endB>=n);if(!i)return;let s=e.state.sliceDoc(i.fromB,Math.max(i.fromB,i.toB-1)),l=e.state.field(eu);i.fromB!=i.toB&&i.toA<=l.length&&(s+=e.state.lineBreak);let a=o.VR.of({from:i.fromA,to:Math.min(l.length,i.toA),insert:s},l.length);e.dispatch({effects:ed.of({doc:a.apply(l),changes:a}),userEvent:"accept"})}(n,n.posAtDOM(h))};let i=t.appendChild(document.createElement("button"));i.name="reject",i.textContent=e.phrase("Reject"),i.onmousedown=e=>{e.preventDefault(),function(e,t){let{state:r}=e,n=null!=t?t:r.selection.main.head,i=r.field(V).find(e=>e.fromB<=n&&e.endB>=n);if(!i)return;let o=r.field(eu).sliceString(i.fromA,Math.max(i.fromA,i.toA-1));i.fromA!=i.toA&&i.toB<=r.doc.length&&(o+=r.lineBreak),e.dispatch({changes:{from:i.fromB,to:Math.min(r.doc.length,i.toB),insert:o},userEvent:"revert"})}(n,n.posAtDOM(h))}}if(r||t.fromA>=t.toA)return h;let d=n.state.field(eu).sliceString(t.fromA,t.endA),u=s&&e.facet(l.BH),m=b(),g=t.changes,p=0,A=!1;function b(){let e=h.appendChild(document.createElement("div"));return e.className="cm-deletedLine",e.appendChild(document.createElement("del"))}function C(e,t,r){for(let n=e;n<t;){if(`
`==d.charAt(n)){m.firstChild||m.appendChild(document.createElement("br")),m=b(),n++;continue}let e=t,o=r+(A?" cm-deletedText":""),s=!1,l=d.indexOf(`
`,n);if(l>-1&&l<t&&(e=l),i&&p<g.length){let t=Math.max(0,A?g[p].toA:g[p].fromA);t<=e&&(e=t,A&&p++,s=!0)}if(e>n){let t=document.createTextNode(d.slice(n,e));if(o){let e=m.appendChild(document.createElement("span"));e.className=o,e.appendChild(t)}else m.appendChild(t);n=e}s&&(A=!A)}}if(u&&t.toA-t.fromA<=f){let t=u.parser.parse(d),r=0;(0,a.DM)(t,{style:t=>(0,l.GY)(e,t)},(e,t,n)=>{e>r&&C(r,e,""),C(e,t,n),r=t}),C(r,d.length,"")}else C(0,d.length,"");return m.firstChild||m.appendChild(document.createElement("br")),h})});return em.set(t.changes,s),s}(e,r,!!n))}return t.finish()}let ep=o.sU.define({create:e=>eg(e),update:(e,t)=>t.state.field(V,!1)!=t.startState.field(V,!1)?eg(t.state):e,provide:e=>i.Lz.decorations.from(e)}),eA=new WeakMap;function ev(e,t){let r=eA.get(t);if(void 0!==r)return r;r=null;let n=e.field(eu),o=e.doc,s=n.lineAt(t.endA).number-n.lineAt(t.fromA).number+1,l=o.lineAt(t.endB).number-o.lineAt(t.fromB).number+1;e:if(s==l&&s<10){let e=[],o=0,l=t.fromA,a=t.fromB;for(let r of t.changes){if(r.fromA<r.toA){o+=r.toA-r.fromA;let t=n.sliceString(l+r.fromA,l+r.toA);if(/\n/.test(t))break e;e.push(i.NZ.widget({widget:new InlineDeletion(t),side:-1}).range(a+r.fromB))}r.fromB<r.toB&&e.push(F.range(a+r.fromB,a+r.toB))}o<t.endA-t.fromA-2*s&&(r=e)}return eA.set(t,r),r}let InlineDeletion=class InlineDeletion extends i.xO{constructor(e){super(),this.text=e}eq(e){return this.text==e.text}toDOM(e){let t=document.createElement("del");return t.className="cm-deletedText",t.textContent=this.text,t}};let eb=new class extends i.wJ{constructor(){super(...arguments),this.elementClass="cm-inlineChangedLineGutter"}},eC=i.NZ.line({class:"cm-inlineChangedLine"});function eB(e,t,r,n){let i=ev(e,t),o=0;if(!i)return!1;for(let s=e.doc.lineAt(t.fromB);;){for(n&&n.add(s.from,s.from,eb),r.add(s.from,s.from,eC);o<i.length&&i[o].to<=s.to;){let e=i[o++];r.add(e.from,e.to,e.value)}if(s.to>=t.endB)break;s=e.doc.lineAt(s.to+1)}return!0}}}]);
//# sourceMappingURL=80124-a7b13a87fd06.js.map